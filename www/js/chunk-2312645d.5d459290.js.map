{"version":3,"sources":["webpack:///./src/layouts/EthWalletLayout/EthWalletLayout.vue?0a4a","webpack:///src/layouts/EthWalletLayout/EthWalletLayout.vue","webpack:///./src/layouts/EthWalletLayout/EthWalletLayout.vue?fadc","webpack:///./src/layouts/EthWalletLayout/EthWalletLayout.vue","webpack:///./src/layouts/EthWalletLayout/index.js","webpack:///./src/layouts/EthWalletLayout/EthWalletLayout.vue?643c","webpack:///./src/services/ethplorer.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","curr-symbol","network","type","name","get-balance","getBalance","get-txs","getTxs","staticRenderFns","EthWalletLayoutvue_type_script_lang_js_","computed","Object","objectSpread","vuex_esm","account","web3","mounted","methods","_getBalance","asyncToGenerator","regeneratorRuntime","mark","_callee","balance","wrap","_context","prev","next","address","eth","toLowerCase","sent","abrupt","utils","fromWei","bignumber_default","a","toFixed","stop","apply","arguments","_getTxs","_callee2","_context2","ethplorer","getEthTx","EthWalletLayout_EthWalletLayoutvue_type_script_lang_js_","component","componentNormalizer","EthWalletLayout","__webpack_require__","d","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_EthWalletLayout_vue_vue_type_style_index_0_id_6bb8b8ad_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_EthWalletLayout_vue_vue_type_style_index_0_id_6bb8b8ad_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","Ethplorer","_home_nikita_Thor_Wallet_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","apiRoute","req","sleep","fetch","res","endpoint","params","url","objToQueryString","Request","encodeURI","method","_sendReq","ok","Error","statusText","json","apiKey","token","get","concat","txs","operations","map","tx","formatTokenTx","formatEthTx","_callee5","ms","_context5","_home_nikita_Thor_Wallet_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default","resolve","setTimeout","obj","_home_nikita_Thor_Wallet_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_2___default","key","join","value","unit","toString","symbol","tokenInfo","hash","transactionHash"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,eAAyBE,MAAA,CAAOC,cAAAP,EAAAQ,QAAAC,KAAAC,KAAAC,cAAAX,EAAAY,WAAAC,UAAAb,EAAAc,WACzHC,EAAA,oFCYAC,EAAA,CACAC,SAAAC,OAAAC,EAAA,KAAAD,CAAA,GACAA,OAAAE,EAAA,KAAAF,CAAA,CACAG,QAAA,UACAC,KAAA,OACAd,QAAA,aAGAe,QARA,aASAC,QAAA,CACAZ,WADA,eAAAa,EAAAP,OAAAQ,EAAA,KAAAR,CAAAS,mBAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAH,mBAAAI,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,WAEAjC,KAAAoB,QAAAc,QAFA,CAAAH,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAGAjC,KAAAqB,KAAAc,IAAAxB,WACAX,KAAAoB,QAAAc,QAAAE,eAJA,cAGAP,EAHAE,EAAAM,KAAAN,EAAAO,OAAA,SAMAtC,KAAAqB,KAAAkB,MAAAC,QACA,IAAAC,EAAAC,EAAAb,GAAAc,UACA,UARA,cAAAZ,EAAAO,OAAA,SAWA,IAXA,wBAAAP,EAAAa,SAAAhB,EAAA5B,SAAA,SAAAW,IAAA,OAAAa,EAAAqB,MAAA7C,KAAA8C,WAAA,OAAAnC,EAAA,GAaAE,OAbA,eAAAkC,EAAA9B,OAAAQ,EAAA,KAAAR,CAAAS,mBAAAC,KAAA,SAAAqB,IAAA,OAAAtB,mBAAAI,KAAA,SAAAmB,GAAA,eAAAA,EAAAjB,KAAAiB,EAAAhB,MAAA,cAAAgB,EAAAhB,KAAA,EAcAiB,EAAA,KAAAC,SAAAnD,KAAAoB,QAAAc,SAdA,cAAAe,EAAAX,OAAA,SAAAW,EAAAZ,MAAA,wBAAAY,EAAAL,SAAAI,EAAAhD,SAAA,SAAAa,IAAA,OAAAkC,EAAAF,MAAA7C,KAAA8C,WAAA,OAAAjC,EAAA,KCtBwWuC,EAAA,0BCQxWC,EAAgBpC,OAAAqC,EAAA,KAAArC,CACdmC,EACAtD,EACAgB,GACF,EACA,KACA,WACA,MAIeyC,EAAAF,UCnBfG,EAAAC,EAAAC,EAAA,4BAAAH,uCCAA,IAAAI,EAAAH,EAAA,QAAAI,EAAAJ,EAAAK,EAAAF,GAAgkBC,EAAG,oKCE7jBE,aACJ,SAAAA,IAAc7C,OAAA8C,EAAA,KAAA9C,CAAAjB,KAAA8D,GACZ9D,KAAKgE,SAAW,6IAGHC,yGACPC,EAAM,4BACMC,MAAMF,iBAAlBG,2BACCA,0LAGCC,EAAUC,oGACZC,YAASvE,KAAKgE,iBAAWK,UAC7BC,EAAS,IAAME,EAAiBF,GAAU,IAGtCL,EAAM,IAAIQ,QAAQC,UAAUH,GAAM,CACtCI,OAAQ,iBAGQ3E,KAAK4E,SAASX,aAA1BG,SAEDA,EAAIS,yBAAU,IAAIC,MAAMV,EAAIW,mCAEpBX,EAAIY,qPAKjB9C,8GACAoC,iCAAS,CACPW,OAAQ,UACRC,MAAO,6CACP1E,KAAM,qBAGUR,KAAKmF,IAAL,sBAAAC,OAA+BlD,GAAWoC,iBAAtDe,2BACCA,EAAIC,WAAWC,IAAI,SAAAC,GAAE,OAAIC,EAAcD,uMAI9CtD,8GACAoC,iCAAS,CACPW,OAAQ,oBAGQjF,KAAKmF,IAAL,2BAAAC,OAAoClD,GAAWoC,iBAA3De,2BACCA,EAAIE,IAAI,SAAAC,GAAE,OAAIE,EAAYF,8HAItBtB,iGAAf,SAAAyB,EAAqBC,GAArB,OAAAlE,mBAAAI,KAAA,SAAA+D,GAAA,eAAAA,EAAA7D,KAAA6D,EAAA5D,MAAA,cAAA4D,EAAAvD,OAAA,SACS,IAAIwD,EAAApD,EAAQ,SAAAqD,GAAO,OAAIC,WAAWD,EAASH,MADpD,wBAAAC,EAAAjD,SAAA+C,8BAIA,SAASnB,EAAiByB,GACxB,OAAOC,IAAYD,GAChBV,IAAI,SAAAY,GAAG,OAAIA,EAAM,IAAMF,EAAIE,KAC3BC,KAAK,KAGV,SAASX,EAAcD,GAIrB,OAHAA,EAAGa,MAAQC,IAAK9D,QAAQgD,EAAGa,MAAO,SAASE,WAC3Cf,EAAGgB,OAAShB,EAAGiB,UAAUD,OACzBhB,EAAGkB,KAAOlB,EAAGmB,gBACNnB,EAGT,SAASE,EAAYF,GAEnB,OADAA,EAAGgB,OAAS,MACLhB,EAGM9B,EAAA,SAAII","file":"js/chunk-2312645d.5d459290.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view',{attrs:{\"curr-symbol\":_vm.network.type.name,\"get-balance\":_vm.getBalance,\"get-txs\":_vm.getTxs}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <router-view\n    :curr-symbol=\"network.type.name\"\n    :get-balance=\"getBalance\"\n    :get-txs=\"getTxs\"\n  />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport ethplorer from '@/services/ethplorer.js';\nimport BigNumber from 'bignumber.js';\n\nexport default {\n  computed: {\n    ...mapGetters({\n      account: 'account',\n      web3: 'web3',\n      network: 'network'\n    })\n  },\n  mounted() {},\n  methods: {\n    async getBalance() {\n      if (this.account.address) {\n        const balance = await this.web3.eth.getBalance(\n          this.account.address.toLowerCase()\n        );\n        return this.web3.utils.fromWei(\n          new BigNumber(balance).toFixed(),\n          'ether'\n        );\n      }\n      return '';\n    },\n    async getTxs() {\n      return await ethplorer.getEthTx(this.account.address);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'EthWalletLayout.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EthWalletLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EthWalletLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EthWalletLayout.vue?vue&type=template&id=6bb8b8ad&scoped=true&\"\nimport script from \"./EthWalletLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./EthWalletLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EthWalletLayout.vue?vue&type=style&index=0&id=6bb8b8ad&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bb8b8ad\",\n  null\n  \n)\n\nexport default component.exports","export { default } from './EthWalletLayout';\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EthWalletLayout.vue?vue&type=style&index=0&id=6bb8b8ad&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EthWalletLayout.vue?vue&type=style&index=0&id=6bb8b8ad&lang=scss&scoped=true&\"","import unit from 'ethjs-unit';\n\nclass Ethplorer {\n  constructor() {\n    this.apiRoute = 'https://api.ethplorer.io';\n  }\n\n  async _sendReq(req) {\n    await sleep(2000);\n    const res = await fetch(req);\n    return res;\n  }\n\n  async get(endpoint, params) {\n    const url = `${this.apiRoute}${endpoint}${\n      params ? '?' + objToQueryString(params) : ''\n    }`;\n\n    const req = new Request(encodeURI(url), {\n      method: 'GET'\n    });\n\n    const res = await this._sendReq(req);\n\n    if (!res.ok) throw new Error(res.statusText);\n\n    return await res.json();\n  }\n\n  //routes\n  async getTokenTx(\n    address,\n    params = {\n      apiKey: 'freekey',\n      token: '0x8424EB7B1E2B8a0254FA7B16df358f11c4572c13',\n      type: 'transfer'\n    }\n  ) {\n    const txs = await this.get(`/getAddressHistory/${address}`, params);\n    return txs.operations.map(tx => formatTokenTx(tx));\n  }\n\n  async getEthTx(\n    address,\n    params = {\n      apiKey: 'freekey'\n    }\n  ) {\n    const txs = await this.get(`/getAddressTransactions/${address}`, params);\n    return txs.map(tx => formatEthTx(tx));\n  }\n}\n\nasync function sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction objToQueryString(obj) {\n  return Object.keys(obj)\n    .map(key => key + '=' + obj[key])\n    .join('&');\n}\n\nfunction formatTokenTx(tx) {\n  tx.value = unit.fromWei(tx.value, 'ether').toString();\n  tx.symbol = tx.tokenInfo.symbol;\n  tx.hash = tx.transactionHash;\n  return tx;\n}\n\nfunction formatEthTx(tx) {\n  tx.symbol = 'ETH';\n  return tx;\n}\n\nexport default new Ethplorer();\n"],"sourceRoot":""}