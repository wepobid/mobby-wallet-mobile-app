{"version":3,"sources":["webpack:///./src/services/ethplorer.js","webpack:///./src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue?e138","webpack:///./src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue?1932","webpack:///src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue","webpack:///./src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue?4ae4","webpack:///./src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue","webpack:///./src/layouts/MobbyWalletLayout/index.js"],"names":["Ethplorer","Object","_Users_nikitazaharov_Thor_Wallet_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","this","apiRoute","req","sleep","fetch","res","endpoint","params","url","objToQueryString","Request","encodeURI","method","_sendReq","ok","Error","statusText","json","address","apiKey","token","type","get","concat","txs","operations","map","tx","formatTokenTx","formatEthTx","_callee5","ms","regeneratorRuntime","wrap","_context5","prev","next","abrupt","_Users_nikitazaharov_Thor_Wallet_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default","a","resolve","setTimeout","stop","obj","_Users_nikitazaharov_Thor_Wallet_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_2___default","key","join","value","unit","fromWei","toString","symbol","tokenInfo","hash","transactionHash","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MobbyWalletLayout_vue_vue_type_style_index_0_id_28f8c882_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MobbyWalletLayout_vue_vue_type_style_index_0_id_28f8c882_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","_h","$createElement","_c","_self","attrs","curr-symbol","network","mobbyToken","get-balance","getBalance","get-txs","getTxs","staticRenderFns","MobbyWalletLayoutvue_type_script_lang_js_","computed","objectSpread","vuex_esm","account","web3","mounted","methods","_getBalance","asyncToGenerator","mark","_callee","balance","_context","getEthBalance","getTokenBalance","sent","$store","dispatch","apply","arguments","_getEthBalance","_callee2","balanceInEth","_context2","eth","toLowerCase","utils","bignumber_default","toFixed","_getTokenBalance","_callee3","contractAbi","contract","data","tokenBalance","denominator","_context3","name","constant","inputs","outputs","Contract","balanceOf","encodeABI","call","to","Number","pow","decimals","div","_x","_getTxs","_callee4","_context4","ethplorer","getTokenTx","MobbyWalletLayout_MobbyWalletLayoutvue_type_script_lang_js_","component","componentNormalizer","MobbyWalletLayout","d"],"mappings":"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","file":"js/chunk-32f822c6.0e502f4d.js","sourcesContent":["import unit from 'ethjs-unit';\n\nclass Ethplorer {\n  constructor() {\n    this.apiRoute = 'https://api.ethplorer.io';\n  }\n\n  async _sendReq(req) {\n    await sleep(2000);\n    const res = await fetch(req);\n    return res;\n  }\n\n  async get(endpoint, params) {\n    const url = `${this.apiRoute}${endpoint}${\n      params ? '?' + objToQueryString(params) : ''\n    }`;\n\n    const req = new Request(encodeURI(url), {\n      method: 'GET'\n    });\n\n    const res = await this._sendReq(req);\n\n    if (!res.ok) throw new Error(res.statusText);\n\n    return await res.json();\n  }\n\n  //routes\n  async getTokenTx(\n    address,\n    params = {\n      apiKey: 'freekey',\n      token: '0x8424EB7B1E2B8a0254FA7B16df358f11c4572c13',\n      type: 'transfer'\n    }\n  ) {\n    const txs = await this.get(`/getAddressHistory/${address}`, params);\n    return txs.operations.map(tx => formatTokenTx(tx));\n  }\n\n  async getEthTx(\n    address,\n    params = {\n      apiKey: 'freekey'\n    }\n  ) {\n    const txs = await this.get(`/getAddressTransactions/${address}`, params);\n    return txs.map(tx => formatEthTx(tx));\n  }\n}\n\nasync function sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction objToQueryString(obj) {\n  return Object.keys(obj)\n    .map(key => key + '=' + obj[key])\n    .join('&');\n}\n\nfunction formatTokenTx(tx) {\n  tx.value = unit.fromWei(tx.value, 'ether').toString();\n  tx.symbol = tx.tokenInfo.symbol;\n  tx.hash = tx.transactionHash;\n  return tx;\n}\n\nfunction formatEthTx(tx) {\n  tx.symbol = 'ETH';\n  return tx;\n}\n\nexport default new Ethplorer();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobbyWalletLayout.vue?vue&type=style&index=0&id=28f8c882&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobbyWalletLayout.vue?vue&type=style&index=0&id=28f8c882&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view',{attrs:{\"curr-symbol\":_vm.network.type.mobbyToken.symbol,\"get-balance\":_vm.getBalance,\"get-txs\":_vm.getTxs}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <router-view\n    :curr-symbol=\"network.type.mobbyToken.symbol\"\n    :get-balance=\"getBalance\"\n    :get-txs=\"getTxs\"\n  />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport ethplorer from '@/services/ethplorer.js';\nimport BigNumber from 'bignumber.js';\n\nexport default {\n  computed: {\n    ...mapGetters({\n      account: 'account',\n      web3: 'web3',\n      network: 'network'\n    })\n  },\n  mounted() {},\n  methods: {\n    async getBalance() {\n      await this.getEthBalance();\n      const balance = await this.getTokenBalance(this.network.type.mobbyToken);\n      this.$store.dispatch('setAccountMobbyTokenBalance', balance);\n      return balance;\n    },\n    async getEthBalance() {\n      const balance = await this.web3.eth.getBalance(\n        this.account.address.toLowerCase()\n      );\n      const balanceInEth = this.web3.utils.fromWei(\n        new BigNumber(balance).toFixed(),\n        'ether'\n      );\n      this.$store.dispatch('setAccountBalance', balanceInEth);\n      return balanceInEth;\n    },\n    async getTokenBalance(token) {\n      const web3 = this.web3;\n      const contractAbi = [\n        {\n          name: 'balanceOf',\n          type: 'function',\n          constant: true,\n          inputs: [{ name: 'address', type: 'address' }],\n          outputs: [{ name: 'out', type: 'uint256' }]\n        }\n      ];\n      const contract = new web3.eth.Contract(contractAbi);\n      const data = contract.methods.balanceOf(this.account.address).encodeABI();\n      const balance = await web3.eth.call({\n        to: token.address,\n        data: data\n      });\n      let tokenBalance;\n      if (Number(balance) === 0 || balance === '0x') {\n        tokenBalance = 0;\n      } else {\n        const denominator = new BigNumber(10).pow(token.decimals);\n        tokenBalance = new BigNumber(balance).div(denominator).toString();\n      }\n      return tokenBalance;\n    },\n    async getTxs() {\n      return await ethplorer.getTokenTx(this.account.address);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'MobbyWalletLayout.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobbyWalletLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobbyWalletLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MobbyWalletLayout.vue?vue&type=template&id=28f8c882&scoped=true&\"\nimport script from \"./MobbyWalletLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./MobbyWalletLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MobbyWalletLayout.vue?vue&type=style&index=0&id=28f8c882&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28f8c882\",\n  null\n  \n)\n\nexport default component.exports","export { default } from './MobbyWalletLayout';\n"],"sourceRoot":""}