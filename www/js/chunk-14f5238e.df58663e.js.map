{"version":3,"sources":["webpack:///./src/containers/SendCurrencyContainer/SendCurrencyContainer.vue?951f","webpack:///src/containers/SendCurrencyContainer/SendCurrencyContainer.vue","webpack:///./src/containers/SendCurrencyContainer/SendCurrencyContainer.vue?0df2","webpack:///./src/containers/SendCurrencyContainer/SendCurrencyContainer.vue","webpack:///./src/containers/SendCurrencyContainer/index.js","webpack:///./src/containers/SendCurrencyContainer/SendCurrencyContainer.vue?0629"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","decode","onDecode","_v","_s","$t","directives","name","rawName","value","expression","ref","attrs","type","autocomplete","domProps","input","$event","target","composing","address","class","isValidAddress","hexAddress","length","aria-hidden","click","sendEntireBalance","placeholder","min","step","isValidAmount","valid","errors","has","msg","_e","validInputs","submitTransaction","staticRenderFns","SendCurrencyContainervue_type_script_lang_js_","components","blockie","Blockie","qrcode-stream","vue_qrcode_reader","props","getBalance","Function","default","data","advancedExpand","gasLimit","computed","Object","objectSpread","vuex_esm","gasPrice","account","walletNamespace","network","web3","balanceDefault","bignumber_default","a","balance","multiWatch","Date","getTime","txTo","isToken","mobbyToken","toLowerCase","txData","getTokenTransferABI","decimals","helpers","sanitizeHex","gte","validateHexString","isValidDecimals","split","isValidData","isValidGasLimit","txFee","lib_default","toWei","times","txFeeEth","fromWei","notEnoughGasMsg","notEnoughTokenMsg","symbol","notEnoughCurrencyMsg","currencyName","invalidValueMsg","enoughTokenBalance","lte","mobbyTokenBalance","enoughCurrency","plus","enoughGas","validDecimal","lt","enoughBalance","watch","val","includes","src_default","isAddress","_","debounce","estimateGas","created","catch","err","responseHandler","ERROR","methods","minus","toString","amount","jsonInterface","constant","inputs","outputs","payable","stateMutability","contract","eth","Contract","transfer","pow","toFixed","encodeABI","_estimateGas","asyncToGenerator","regeneratorRuntime","mark","_callee","coinbase","params","_this","wrap","_context","prev","next","getCoinbase","sent","from","txValue","to","then","stop","apply","arguments","_submitTransaction","_callee2","nonce","_tx","json","_context2","getTransactionCount","es5_default","chainId","chainID","toJSON","sendTransaction","t0","decodedString","console","log","SendCurrencyContainer_SendCurrencyContainervue_type_script_lang_js_","component","componentNormalizer","SendCurrencyContainer","__webpack_require__","d","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SendCurrencyContainer_vue_vue_type_style_index_0_id_692936ee_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SendCurrencyContainer_vue_vue_type_style_index_0_id_692936ee_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-14f5238e.df58663e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"send-currency-container page-container\"},[_c('qrcode-stream',{on:{\"decode\":_vm.onDecode}}),_c('div',{staticClass:\"send-form\"},[_c('div',{staticClass:\"to-address\"},[_c('div',{staticClass:\"title\"},[_c('h4',[_vm._v(_vm._s(_vm.$t('interface.sendTxToAddr')))])]),_c('div',{staticClass:\"address-block\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.address),expression:\"address\"}],ref:\"address\",attrs:{\"type\":\"text\",\"name\":\"name\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.address=$event.target.value}}}),_c('i',{class:[\n            _vm.isValidAddress && _vm.hexAddress.length !== 0 ? '' : 'not-good',\n            'fa fa-check-circle good-button'\n          ],attrs:{\"aria-hidden\":\"true\"}})])]),_c('div',{staticClass:\"amount\"},[_c('div',{staticClass:\"title\"},[_c('h4',[_vm._v(_vm._s(_vm.$t('interface.sendTxAmount')))]),_c('p',{staticClass:\"title-button prevent-user-select\",on:{\"click\":_vm.sendEntireBalance}},[_vm._v(\"\\n          Entire Balance\\n        \")])]),_c('div',{staticClass:\"amount-number\"},[_c('input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('min_value:0'),expression:\"'min_value:0'\"},{name:\"model\",rawName:\"v-model\",value:(_vm.value),expression:\"value\"}],attrs:{\"type\":\"number\",\"placeholder\":\"Amount\",\"min\":\"0\",\"name\":\"value\",\"step\":\"any\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.value=$event.target.value}}}),_c('i',{class:[\n            !_vm.isValidAmount.valid || _vm.errors.has('value') ? 'not-good' : '',\n            'fa fa-check-circle good-button'\n          ],attrs:{\"aria-hidden\":\"true\"}})]),(!_vm.isValidAmount.valid || _vm.errors.has('value'))?_c('div',{staticClass:\"error-message-container\"},[_c('p',[_vm._v(_vm._s(_vm.isValidAmount.msg))])]):_vm._e()])]),_c('div',{class:[\n      _vm.validInputs ? '' : 'disabled',\n      'submit-button mid-round-button-green-filled',\n      'text-center'\n    ],on:{\"click\":_vm.submitTransaction}},[_vm._v(\"\\n    \"+_vm._s(_vm.$t('interface.sendTx'))+\"\\n  \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"send-currency-container page-container\">\n    <qrcode-stream @decode=\"onDecode\"></qrcode-stream>\n\n    <div class=\"send-form\">\n      <div class=\"to-address\">\n        <div class=\"title\">\n          <h4>{{ $t('interface.sendTxToAddr') }}</h4>\n        </div>\n        <div class=\"address-block\">\n          <input\n            ref=\"address\"\n            v-model=\"address\"\n            type=\"text\"\n            name=\"name\"\n            autocomplete=\"off\"\n          />\n          <i\n            :class=\"[\n              isValidAddress && hexAddress.length !== 0 ? '' : 'not-good',\n              'fa fa-check-circle good-button'\n            ]\"\n            aria-hidden=\"true\"\n          />\n        </div>\n      </div>\n      <div class=\"amount\">\n        <div class=\"title\">\n          <h4>{{ $t('interface.sendTxAmount') }}</h4>\n          <p\n            class=\"title-button prevent-user-select\"\n            @click=\"sendEntireBalance\"\n          >\n            Entire Balance\n          </p>\n        </div>\n        <div class=\"amount-number\">\n          <input\n            v-validate=\"'min_value:0'\"\n            v-model=\"value\"\n            type=\"number\"\n            placeholder=\"Amount\"\n            min=\"0\"\n            name=\"value\"\n            step=\"any\"\n            autocomplete=\"off\"\n          />\n          <i\n            :class=\"[\n              !isValidAmount.valid || errors.has('value') ? 'not-good' : '',\n              'fa fa-check-circle good-button'\n            ]\"\n            aria-hidden=\"true\"\n          />\n        </div>\n        <div\n          v-if=\"!isValidAmount.valid || errors.has('value')\"\n          class=\"error-message-container\"\n        >\n          <p>{{ isValidAmount.msg }}</p>\n        </div>\n      </div>\n    </div>\n\n    <div\n      :class=\"[\n        validInputs ? '' : 'disabled',\n        'submit-button mid-round-button-green-filled',\n        'text-center'\n      ]\"\n      @click=\"submitTransaction\"\n    >\n      {{ $t('interface.sendTx') }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { QrcodeStream } from 'vue-qrcode-reader';\nimport { Toast, Misc } from '@/helpers';\nimport { mapGetters } from 'vuex';\nimport Blockie from '@/components/Blockie';\nimport BigNumber from 'bignumber.js';\nimport ethUnit from 'ethjs-unit';\nimport EthTx from 'ethereumjs-tx';\nimport utils from 'web3-utils';\n\nexport default {\n  components: {\n    blockie: Blockie,\n    'qrcode-stream': QrcodeStream\n  },\n  props: {\n    getBalance: {\n      type: Function,\n      default: function() {}\n    }\n  },\n  data() {\n    return {\n      advancedExpand: false,\n      isValidAddress: false,\n      hexAddress: '',\n      address: '',\n      value: '0',\n      data: '',\n      gasLimit: '21000'\n    };\n  },\n  computed: {\n    ...mapGetters({\n      gasPrice: 'gasPrice',\n      account: 'account',\n      walletNamespace: 'walletNamespace',\n      network: 'network',\n      web3: 'web3'\n    }),\n    balanceDefault() {\n      return new BigNumber(this.account.balance);\n    },\n    multiWatch() {\n      return (\n        this.value, this.isValidAddress, this.data, new Date().getTime() / 1000\n      );\n    },\n    txTo() {\n      return this.isToken\n        ? this.network.type.mobbyToken.address.toLowerCase()\n        : this.hexAddress.toLowerCase();\n    },\n    isToken() {\n      return this.walletNamespace === 'mobby';\n    },\n    txData() {\n      if (this.isToken) {\n        return this.getTokenTransferABI(\n          this.value,\n          this.network.type.mobbyToken.decimals\n        );\n      }\n      return Misc.sanitizeHex(this.data);\n    },\n    validInputs() {\n      return (\n        this.isValidAmount.valid &&\n        this.isValidAddress &&\n        (new BigNumber(this.gasLimit).gte(0) || this.gasLimit == -1) &&\n        Misc.validateHexString(this.data)\n      );\n    },\n    isValidDecimals() {\n      const decimals = (this.value + '').split('.')[1];\n      if (!decimals) return true;\n      if (this.isToken) {\n        return decimals.length <= this.network.type.mobbyToken.decimals;\n      }\n      return decimals.length <= 18;\n    },\n    isValidData() {\n      return Misc.validateHexString(this.data);\n    },\n    isValidGasLimit() {\n      return new BigNumber(this.gasLimit).gte(0);\n    },\n    isValidAmount() {\n      const txFee = new BigNumber(ethUnit.toWei(this.gasPrice, 'gwei')).times(\n        this.gasLimit || 0\n      );\n      const txFeeEth = ethUnit.fromWei(txFee, 'ether');\n      const notEnoughGasMsg =\n        this.$t('errorsGlobal.notAValidAmountTotal') +\n        ' Gas ' +\n        this.$t('errorsGlobal.toSend');\n      const notEnoughTokenMsg =\n        this.$t('errorsGlobal.notAValidAmountTotal') +\n        ' ' +\n        this.network.type.mobbyToken.symbol +\n        ' ' +\n        this.$t('errorsGlobal.toSend');\n      const notEnoughCurrencyMsg =\n        this.$t('errorsGlobal.notAValidAmountTotal') +\n        ' ' +\n        this.network.type.currencyName +\n        ' ' +\n        this.$t('errorsGlobal.toSend');\n      const invalidValueMsg = this.$t('errorsGlobal.invalidValue');\n      const enoughTokenBalance = new BigNumber(this.value).lte(\n        this.account.mobbyTokenBalance\n      );\n      const enoughCurrency = new BigNumber(this.value)\n        .plus(txFeeEth)\n        .lte(this.balanceDefault);\n      const enoughGas = new BigNumber(txFeeEth).lte(this.balanceDefault);\n      const validDecimal = this.isValidDecimals;\n      if (new BigNumber(this.value).lt(0)) {\n        return {\n          msg: invalidValueMsg,\n          valid: false\n        };\n      }\n      if (this.isToken) {\n        const enoughBalance = enoughTokenBalance && enoughGas && validDecimal;\n        return {\n          valid: enoughBalance,\n          msg: enoughBalance\n            ? ''\n            : !enoughTokenBalance\n            ? notEnoughTokenMsg\n            : !enoughGas\n            ? notEnoughGasMsg\n            : invalidValueMsg\n        };\n      }\n      return {\n        valid: enoughCurrency && validDecimal,\n        msg: enoughCurrency\n          ? ''\n          : !enoughCurrency\n          ? notEnoughCurrencyMsg\n          : invalidValueMsg\n      };\n    }\n  },\n  watch: {\n    address(val) {\n      this.isValidAddress = val.includes('0x') && utils.isAddress(val);\n      if (this.isValidAddress) this.hexAddress = this.address;\n    },\n    multiWatch: utils._.debounce(function() {\n      if (this.validInputs) this.estimateGas();\n    }, 500)\n  },\n  created() {\n    this.getBalance().catch(err => {\n      Toast.responseHandler(err, Toast.ERROR);\n    });\n  },\n  methods: {\n    sendEntireBalance() {\n      switch (this.walletNamespace) {\n        case 'mobby':\n          this.value = this.account.mobbyTokenBalance;\n          break;\n        case 'eth':\n          this.value =\n            this.balanceDefault > 0\n              ? this.balanceDefault.minus(\n                  ethUnit.fromWei(\n                    new BigNumber(ethUnit.toWei(this.gasPrice, 'gwei'))\n                      .times(this.gasLimit)\n                      .toString(),\n                    'ether'\n                  )\n                )\n              : 0;\n          break;\n        default:\n          break;\n      }\n    },\n    getTokenTransferABI(amount, decimals) {\n      const jsonInterface = [\n        {\n          constant: false,\n          inputs: [\n            { name: '_to', type: 'address' },\n            { name: '_amount', type: 'uint256' }\n          ],\n          name: 'transfer',\n          outputs: [{ name: '', type: 'bool' }],\n          payable: false,\n          stateMutability: 'nonpayable',\n          type: 'function'\n        }\n      ];\n      const contract = new this.web3.eth.Contract(jsonInterface);\n      return contract.methods\n        .transfer(\n          this.hexAddress.toLowerCase(),\n          new BigNumber(amount).times(new BigNumber(10).pow(decimals)).toFixed()\n        )\n        .encodeABI();\n    },\n    async estimateGas() {\n      const coinbase = await this.web3.eth.getCoinbase();\n      const params = {\n        from: coinbase,\n        value: this.txValue,\n        to: this.txTo,\n        gasPrice: Misc.sanitizeHex(\n          ethUnit.toWei(this.gasPrice, 'gwei').toString(16)\n        ),\n        data: this.txData\n      };\n      this.web3.eth\n        .estimateGas(params)\n        .then(gasLimit => {\n          this.gasLimit = gasLimit;\n        })\n        .catch(err => {\n          this.gasLimit = -1;\n          Toast.responseHandler(err, Toast.ERROR);\n        });\n    },\n    async submitTransaction() {\n      try {\n        const coinbase = await this.web3.eth.getCoinbase();\n        const nonce = await this.web3.eth.getTransactionCount(coinbase);\n        const _tx = new EthTx({\n          nonce: Misc.sanitizeHex(new BigNumber(nonce).toString(16)),\n          gasPrice: Misc.sanitizeHex(\n            ethUnit.toWei(this.gasPrice, 'gwei').toString(16)\n          ),\n          gasLimit: Misc.sanitizeHex(new BigNumber(this.gasLimit).toString(16)),\n          to: this.txTo,\n          value: this.txValue,\n          data: this.txData,\n          chainId: this.network.type.chainID\n        });\n        const json = _tx.toJSON(true);\n        json.from = coinbase;\n        this.web3.eth.sendTransaction(json).catch(err => {\n          Toast.responseHandler(err, Toast.ERROR);\n        });\n      } catch (e) {\n        Toast.responseHandler(e, Toast.ERROR);\n      }\n    },\n    onDecode(decodedString) {\n      console.log(decodedString);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'SendCurrencyContainer.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendCurrencyContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendCurrencyContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SendCurrencyContainer.vue?vue&type=template&id=692936ee&scoped=true&\"\nimport script from \"./SendCurrencyContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./SendCurrencyContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SendCurrencyContainer.vue?vue&type=style&index=0&id=692936ee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"692936ee\",\n  null\n  \n)\n\nexport default component.exports","export { default } from './SendCurrencyContainer';\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendCurrencyContainer.vue?vue&type=style&index=0&id=692936ee&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendCurrencyContainer.vue?vue&type=style&index=0&id=692936ee&lang=scss&scoped=true&\""],"sourceRoot":""}