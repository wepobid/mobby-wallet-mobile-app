{"version":3,"sources":["webpack:///./src/services/ethplorer.js","webpack:///./src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue?ba8b","webpack:///src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue","webpack:///./src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue?4ae4","webpack:///./src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue","webpack:///./src/layouts/MobbyWalletLayout/index.js","webpack:///./src/layouts/MobbyWalletLayout/MobbyWalletLayout.vue?9619"],"names":["Ethplorer","Object","_home_nikita_Thor_Wallet_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","this","apiRoute","req","sleep","fetch","res","endpoint","params","url","objToQueryString","Request","encodeURI","method","_sendReq","ok","Error","statusText","json","address","apiKey","token","type","get","concat","txs","operations","map","tx","formatTokenTx","formatEthTx","_callee5","ms","regeneratorRuntime","wrap","_context5","prev","next","abrupt","_home_nikita_Thor_Wallet_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default","a","resolve","setTimeout","stop","obj","_home_nikita_Thor_Wallet_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_2___default","key","join","value","unit","fromWei","toString","symbol","tokenInfo","hash","transactionHash","__webpack_exports__","render","_vm","_h","$createElement","_c","_self","attrs","curr-symbol","network","mobbyToken","get-balance","getBalance","get-txs","getTxs","staticRenderFns","MobbyWalletLayoutvue_type_script_lang_js_","computed","objectSpread","vuex_esm","account","web3","mounted","methods","_getBalance","asyncToGenerator","mark","_callee","_context","getTokenBalance","sent","apply","arguments","_getTokenBalance","_callee2","contractAbi","contract","data","balance","tokenBalance","denominator","_context2","name","constant","inputs","outputs","eth","Contract","balanceOf","encodeABI","call","to","Number","bignumber_default","pow","decimals","div","_x","_getTxs","_callee3","_context3","ethplorer","getTokenTx","MobbyWalletLayout_MobbyWalletLayoutvue_type_script_lang_js_","component","componentNormalizer","MobbyWalletLayout","__webpack_require__","d","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MobbyWalletLayout_vue_vue_type_style_index_0_id_31246c3e_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MobbyWalletLayout_vue_vue_type_style_index_0_id_31246c3e_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-419dddc8.dabd994c.js","sourcesContent":["import unit from 'ethjs-unit';\n\nclass Ethplorer {\n  constructor() {\n    this.apiRoute = 'https://api.ethplorer.io';\n  }\n\n  async _sendReq(req) {\n    await sleep(2000);\n    const res = await fetch(req);\n    return res;\n  }\n\n  async get(endpoint, params) {\n    const url = `${this.apiRoute}${endpoint}${\n      params ? '?' + objToQueryString(params) : ''\n    }`;\n\n    const req = new Request(encodeURI(url), {\n      method: 'GET'\n    });\n\n    const res = await this._sendReq(req);\n\n    if (!res.ok) throw new Error(res.statusText);\n\n    return await res.json();\n  }\n\n  //routes\n  async getTokenTx(\n    address,\n    params = {\n      apiKey: 'freekey',\n      token: '0x8424EB7B1E2B8a0254FA7B16df358f11c4572c13',\n      type: 'transfer'\n    }\n  ) {\n    const txs = await this.get(`/getAddressHistory/${address}`, params);\n    return txs.operations.map(tx => formatTokenTx(tx));\n  }\n\n  async getEthTx(\n    address,\n    params = {\n      apiKey: 'freekey'\n    }\n  ) {\n    const txs = await this.get(`/getAddressTransactions/${address}`, params);\n    return txs.map(tx => formatEthTx(tx));\n  }\n}\n\nasync function sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction objToQueryString(obj) {\n  return Object.keys(obj)\n    .map(key => key + '=' + obj[key])\n    .join('&');\n}\n\nfunction formatTokenTx(tx) {\n  tx.value = unit.fromWei(tx.value, 'ether').toString();\n  tx.symbol = tx.tokenInfo.symbol;\n  tx.hash = tx.transactionHash;\n  return tx;\n}\n\nfunction formatEthTx(tx) {\n  tx.symbol = 'ETH';\n  return tx;\n}\n\nexport default new Ethplorer();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view',{attrs:{\"curr-symbol\":_vm.network.type.mobbyToken.symbol,\"get-balance\":_vm.getBalance,\"get-txs\":_vm.getTxs}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <router-view\n    :curr-symbol=\"network.type.mobbyToken.symbol\"\n    :get-balance=\"getBalance\"\n    :get-txs=\"getTxs\"\n  />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport ethplorer from '@/services/ethplorer.js';\nimport BigNumber from 'bignumber.js';\n\nexport default {\n  computed: {\n    ...mapGetters({\n      account: 'account',\n      web3: 'web3',\n      network: 'network'\n    })\n  },\n  mounted() {},\n  methods: {\n    async getBalance() {\n      return await this.getTokenBalance(this.network.type.mobbyToken);\n    },\n    async getTokenBalance(token) {\n      const web3 = this.web3;\n      const contractAbi = [\n        {\n          name: 'balanceOf',\n          type: 'function',\n          constant: true,\n          inputs: [{ name: 'address', type: 'address' }],\n          outputs: [{ name: 'out', type: 'uint256' }]\n        }\n      ];\n      const contract = new web3.eth.Contract(contractAbi);\n      const data = contract.methods.balanceOf(this.account.address).encodeABI();\n      const balance = await web3.eth.call({\n        to: token.address,\n        data: data\n      });\n      let tokenBalance;\n      if (Number(balance) === 0 || balance === '0x') {\n        tokenBalance = 0;\n      } else {\n        const denominator = new BigNumber(10).pow(token.decimals);\n        tokenBalance = new BigNumber(balance).div(denominator).toString();\n      }\n      return tokenBalance;\n    },\n    async getTxs() {\n      return await ethplorer.getTokenTx(this.account.address);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'MobbyWalletLayout.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobbyWalletLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobbyWalletLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MobbyWalletLayout.vue?vue&type=template&id=31246c3e&scoped=true&\"\nimport script from \"./MobbyWalletLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./MobbyWalletLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MobbyWalletLayout.vue?vue&type=style&index=0&id=31246c3e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31246c3e\",\n  null\n  \n)\n\nexport default component.exports","export { default } from './MobbyWalletLayout';\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobbyWalletLayout.vue?vue&type=style&index=0&id=31246c3e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobbyWalletLayout.vue?vue&type=style&index=0&id=31246c3e&lang=scss&scoped=true&\""],"sourceRoot":""}