(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-629d50e0"],{"1ab3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"send-currency-container page-container"},[a("div",{staticClass:"send-form"},[a("div",{staticClass:"to-address"},[a("div",{staticClass:"title"},[a("h4",[e._v(e._s(e.$t("interface.sendTxToAddr")))])]),a("div",{staticClass:"address-block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],ref:"address",attrs:{type:"text",name:"name",autocomplete:"off"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}}),a("i",{class:[e.isValidAddress&&0!==e.hexAddress.length?"":"not-good","fa fa-check-circle good-button"],attrs:{"aria-hidden":"true"}}),a("button",{staticClass:"qr-btn",on:{click:e.qrReaderOpen}},[e._v("QR")])])]),a("div",{staticClass:"amount"},[a("div",{staticClass:"title"},[a("h4",[e._v(e._s(e.$t("interface.sendTxAmount")))]),a("p",{staticClass:"title-button prevent-user-select",on:{click:e.sendEntireBalance}},[e._v("Entire Balance")])]),a("div",{staticClass:"amount-number"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"min_value:0",expression:"'min_value:0'"},{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number",placeholder:"Amount",min:"0",name:"value",step:"any",autocomplete:"off"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),a("i",{class:[!e.isValidAmount.valid||e.errors.has("value")?"not-good":"","fa fa-check-circle good-button"],attrs:{"aria-hidden":"true"}})]),!e.isValidAmount.valid||e.errors.has("value")?a("div",{staticClass:"error-message-container"},[a("p",[e._v(e._s(e.isValidAmount.msg))])]):e._e()])]),a("div",{class:[e.validInputs?"":"disabled","submit-button mid-round-button-green-filled","text-center"],on:{click:e.submitTransaction}},[e._v(e._s(e.$t("interface.sendTx")))])])},s=[],i=(a("96cf"),a("3b8d")),r=(a("6b54"),a("6762"),a("2fdb"),a("28a5"),a("cebc")),o=a("ce96"),c=a("2f62"),d=a("c8e5"),l=a("901e"),u=a.n(l),h=a("70c1"),m=a.n(h),b=a("dbd9"),v=a.n(b),p=a("1131"),f=a.n(p),w={components:{blockie:d["a"]},props:{getBalance:{type:Function,default:function(){}}},data:function(){return{advancedExpand:!1,isValidAddress:!1,hexAddress:"",address:"",value:"0",data:"",gasLimit:"21000"}},computed:Object(r["a"])({},Object(c["b"])({gasPrice:"gasPrice",account:"account",walletNamespace:"walletNamespace",network:"network",web3:"web3"}),{balanceDefault:function(){return new u.a(this.account.balance)},multiWatch:function(){return this.value,this.isValidAddress,this.data,(new Date).getTime()/1e3},txTo:function(){return this.isToken?this.network.type.mobbyToken.address.toLowerCase():this.hexAddress.toLowerCase()},isToken:function(){return"mobby"===this.walletNamespace},txData:function(){return this.isToken?this.getTokenTransferABI(this.value,this.network.type.mobbyToken.decimals):o["c"].sanitizeHex(this.data)},validInputs:function(){return this.isValidAmount.valid&&this.isValidAddress&&(new u.a(this.gasLimit).gte(0)||-1==this.gasLimit)&&o["c"].validateHexString(this.data)},isValidDecimals:function(){var e=(this.value+"").split(".")[1];return!e||(this.isToken?e.length<=this.network.type.mobbyToken.decimals:e.length<=18)},isValidData:function(){return o["c"].validateHexString(this.data)},isValidGasLimit:function(){return new u.a(this.gasLimit).gte(0)},isValidAmount:function(){var e=new u.a(m.a.toWei(this.gasPrice,"gwei")).times(this.gasLimit||0),t=m.a.fromWei(e,"ether"),a=this.$t("errorsGlobal.notAValidAmountTotal")+" Gas "+this.$t("errorsGlobal.toSend"),n=this.$t("errorsGlobal.notAValidAmountTotal")+" "+this.network.type.mobbyToken.symbol+" "+this.$t("errorsGlobal.toSend"),s=this.$t("errorsGlobal.notAValidAmountTotal")+" "+this.network.type.currencyName+" "+this.$t("errorsGlobal.toSend"),i=this.$t("errorsGlobal.invalidValue"),r=new u.a(this.value).lte(this.account.mobbyTokenBalance),o=new u.a(this.value).plus(t).lte(this.balanceDefault),c=new u.a(t).lte(this.balanceDefault),d=this.isValidDecimals;if(new u.a(this.value).lt(0))return{msg:i,valid:!1};if(this.isToken){var l=r&&c&&d;return{valid:l,msg:l?"":r?c?i:a:n}}return{valid:o&&d,msg:o?"":o?i:s}}}),watch:{address:function(e){this.isValidAddress=e.includes("0x")&&f.a.isAddress(e),this.isValidAddress&&(this.hexAddress=this.address)},multiWatch:f.a._.debounce(function(){this.validInputs&&this.estimateGas()},500)},created:function(){this.getBalance().catch(function(e){o["d"].responseHandler(e,o["d"].ERROR)})},methods:{sendEntireBalance:function(){switch(this.walletNamespace){case"mobby":this.value=this.account.mobbyTokenBalance;break;case"eth":this.value=this.balanceDefault>0?this.balanceDefault.minus(m.a.fromWei(new u.a(m.a.toWei(this.gasPrice,"gwei")).times(this.gasLimit).toString(),"ether")):0;break;default:break}},getTokenTransferABI:function(e,t){var a=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],n=new this.web3.eth.Contract(a);return n.methods.transfer(this.hexAddress.toLowerCase(),new u.a(e).times(new u.a(10).pow(t)).toFixed()).encodeABI()},estimateGas:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getCoinbase();case 2:t=e.sent,a={from:t,value:this.txValue,to:this.txTo,gasPrice:o["c"].sanitizeHex(m.a.toWei(this.gasPrice,"gwei").toString(16)),data:this.txData},this.web3.eth.estimateGas(a).then(function(e){n.gasLimit=e}).catch(function(e){n.gasLimit=-1,o["d"].responseHandler(e,o["d"].ERROR)});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),submitTransaction:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.web3.eth.getCoinbase();case 3:return t=e.sent,e.next=6,this.web3.eth.getTransactionCount(t);case 6:a=e.sent,n=new v.a({nonce:o["c"].sanitizeHex(new u.a(a).toString(16)),gasPrice:o["c"].sanitizeHex(m.a.toWei(this.gasPrice,"gwei").toString(16)),gasLimit:o["c"].sanitizeHex(new u.a(this.gasLimit).toString(16)),to:this.txTo,value:this.txValue,data:this.txData,chainId:this.network.type.chainID}),s=n.toJSON(!0),s.from=t,this.web3.eth.sendTransaction(s).catch(function(e){o["d"].responseHandler(e,o["d"].ERROR)}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),o["d"].responseHandler(e.t0,o["d"].ERROR);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));function t(){return e.apply(this,arguments)}return t}(),qrReaderOpen:function(){var e=window.QRScanner;function t(t,a){t&&o["d"].responseHandler(t,o["d"].ERROR),a.authorized?(e.scan(function(e,t){e||alert(t)}),e.show()):a.denied?alert("Status denied"):alert("User Cancel")}e&&e.prepare(t)}}},g=w,x=(a("57a9"),a("2877")),k=Object(x["a"])(g,n,s,!1,null,"023a3dc8",null),y=k.exports;a.d(t,"default",function(){return y})},"57a9":function(e,t,a){"use strict";var n=a("bdc3"),s=a.n(n);s.a},bdc3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-629d50e0.ee41f4c1.js.map