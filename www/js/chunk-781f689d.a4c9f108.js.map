{"version":3,"sources":["webpack:///./src/layouts/EthWalletLayout/EthWalletLayout.vue?6418","webpack:///./src/layouts/EthWalletLayout/EthWalletLayout.vue?c231","webpack:///src/layouts/EthWalletLayout/EthWalletLayout.vue","webpack:///./src/layouts/EthWalletLayout/EthWalletLayout.vue?fadc","webpack:///./src/layouts/EthWalletLayout/EthWalletLayout.vue","webpack:///./src/layouts/EthWalletLayout/index.js","webpack:///./src/services/ethplorer.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_EthWalletLayout_vue_vue_type_style_index_0_id_5088338c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_EthWalletLayout_vue_vue_type_style_index_0_id_5088338c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","curr-symbol","network","type","name","get-balance","getBalance","get-txs","getTxs","staticRenderFns","EthWalletLayoutvue_type_script_lang_js_","computed","Object","objectSpread","vuex_esm","account","web3","mounted","methods","_getBalance","asyncToGenerator","regeneratorRuntime","mark","_callee","balance","balanceInEth","wrap","_context","prev","next","eth","address","toLowerCase","sent","utils","fromWei","bignumber_default","a","toFixed","$store","dispatch","abrupt","stop","apply","arguments","_getTxs","_callee2","_context2","ethplorer","getEthTx","EthWalletLayout_EthWalletLayoutvue_type_script_lang_js_","component","componentNormalizer","EthWalletLayout","d","__webpack_exports__","Ethplorer","_Users_nikitazaharov_Thor_Wallet_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","apiRoute","req","sleep","fetch","res","endpoint","params","url","objToQueryString","Request","encodeURI","method","_sendReq","ok","Error","statusText","json","apiKey","token","get","concat","txs","operations","map","tx","formatTokenTx","formatEthTx","_callee5","ms","_context5","_Users_nikitazaharov_Thor_Wallet_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default","resolve","setTimeout","obj","_Users_nikitazaharov_Thor_Wallet_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_2___default","key","join","value","unit","toString","symbol","tokenInfo","hash","transactionHash"],"mappings":"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","file":"js/chunk-781f689d.a4c9f108.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EthWalletLayout.vue?vue&type=style&index=0&id=5088338c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EthWalletLayout.vue?vue&type=style&index=0&id=5088338c&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view',{attrs:{\"curr-symbol\":_vm.network.type.name,\"get-balance\":_vm.getBalance,\"get-txs\":_vm.getTxs}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <router-view\n    :curr-symbol=\"network.type.name\"\n    :get-balance=\"getBalance\"\n    :get-txs=\"getTxs\"\n  />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport ethplorer from '@/services/ethplorer.js';\nimport BigNumber from 'bignumber.js';\n\nexport default {\n  computed: {\n    ...mapGetters({\n      account: 'account',\n      web3: 'web3',\n      network: 'network'\n    })\n  },\n  mounted() {},\n  methods: {\n    async getBalance() {\n      const balance = await this.web3.eth.getBalance(\n        this.account.address.toLowerCase()\n      );\n      const balanceInEth = this.web3.utils.fromWei(\n        new BigNumber(balance).toFixed(),\n        'ether'\n      );\n      this.$store.dispatch('setAccountBalance', balanceInEth);\n      return balanceInEth;\n    },\n    async getTxs() {\n      return await ethplorer.getEthTx(this.account.address);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'EthWalletLayout.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EthWalletLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EthWalletLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EthWalletLayout.vue?vue&type=template&id=5088338c&scoped=true&\"\nimport script from \"./EthWalletLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./EthWalletLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EthWalletLayout.vue?vue&type=style&index=0&id=5088338c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5088338c\",\n  null\n  \n)\n\nexport default component.exports","export { default } from './EthWalletLayout';\n","import unit from 'ethjs-unit';\n\nclass Ethplorer {\n  constructor() {\n    this.apiRoute = 'https://api.ethplorer.io';\n  }\n\n  async _sendReq(req) {\n    await sleep(2000);\n    const res = await fetch(req);\n    return res;\n  }\n\n  async get(endpoint, params) {\n    const url = `${this.apiRoute}${endpoint}${\n      params ? '?' + objToQueryString(params) : ''\n    }`;\n\n    const req = new Request(encodeURI(url), {\n      method: 'GET'\n    });\n\n    const res = await this._sendReq(req);\n\n    if (!res.ok) throw new Error(res.statusText);\n\n    return await res.json();\n  }\n\n  //routes\n  async getTokenTx(\n    address,\n    params = {\n      apiKey: 'freekey',\n      token: '0x8424EB7B1E2B8a0254FA7B16df358f11c4572c13',\n      type: 'transfer'\n    }\n  ) {\n    const txs = await this.get(`/getAddressHistory/${address}`, params);\n    return txs.operations.map(tx => formatTokenTx(tx));\n  }\n\n  async getEthTx(\n    address,\n    params = {\n      apiKey: 'freekey'\n    }\n  ) {\n    const txs = await this.get(`/getAddressTransactions/${address}`, params);\n    return txs.map(tx => formatEthTx(tx));\n  }\n}\n\nasync function sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction objToQueryString(obj) {\n  return Object.keys(obj)\n    .map(key => key + '=' + obj[key])\n    .join('&');\n}\n\nfunction formatTokenTx(tx) {\n  tx.value = unit.fromWei(tx.value, 'ether').toString();\n  tx.symbol = tx.tokenInfo.symbol;\n  tx.hash = tx.transactionHash;\n  return tx;\n}\n\nfunction formatEthTx(tx) {\n  tx.symbol = 'ETH';\n  return tx;\n}\n\nexport default new Ethplorer();\n"],"sourceRoot":""}